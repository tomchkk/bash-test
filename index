#!/usr/bin/env bash

__bash_test_dir="${1:?"The app directory is required"}"
__bash_test_autoloader="${2:?"The autoloader path is required"}"
__bash_test_run_args=${@:3}

__bash_test_version="$(
    cd "$__bash_test_dir"
    git describe --always --first-parent HEAD || echo "v0.0.0"
)"

echo "Bash Test - $__bash_test_version" && echo

source "$__bash_test_autoloader"

__bash_test_args=(
    "$__bash_test_dir/src/bash-assert"
    "$tomchkk_private_projects_bash_clash/src/index"
)
source "$__bash_test_dir/src/bash-test" "${__bash_test_args[@]}"

bash_test::run $__bash_test_run_args

echo
